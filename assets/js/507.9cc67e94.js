(window.webpackJsonp=window.webpackJsonp||[]).push([[507],{2346:function(t,_,v){"use strict";v.r(_);var a=v(54),e=Object(a.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("p"),v("div",{staticClass:"table-of-contents"},[v("ul",[v("li",[v("a",{attrs:{href:"#_1、聚合"}},[t._v("1、聚合")])]),v("li",[v("a",{attrs:{href:"#_2、桶-bucket"}},[t._v("2、桶（bucket）")])]),v("li",[v("a",{attrs:{href:"#_3、度量-metrics"}},[t._v("3、度量（metrics）")])])])]),v("p"),t._v(" "),v("h1",{attrs:{id:"第六节-第一点-相关概念"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#第六节-第一点-相关概念"}},[t._v("#")]),t._v(" 第六节 第一点 相关概念")]),t._v(" "),v("h2",{attrs:{id:"_1、聚合"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1、聚合"}},[t._v("#")]),t._v(" 1、聚合")]),t._v(" "),v("p",[t._v("聚合查询用于需要对查询结果进行统计、分析的场景，类似于在 SQL 语句中执行 GROUP BY。比如")]),t._v(" "),v("ul",[v("li",[t._v("什么品牌的手机最受欢迎？")]),t._v(" "),v("li",[t._v("这些手机的平均价格、最高价格、最低价格？")]),t._v(" "),v("li",[t._v("这些手机每月的销售情况如何？")])]),t._v(" "),v("p",[t._v("由 ElasticSearch 来完成这些工作比关系型数据库有更好的计算速度。ElasticSearch 中的聚合，包含多种类型，最常用的两种：一个叫"),v("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("桶")]),t._v("，一个叫"),v("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("度量")]),t._v("。")]),t._v(" "),v("h2",{attrs:{id:"_2、桶-bucket"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2、桶-bucket"}},[t._v("#")]),t._v(" 2、桶（bucket）")]),t._v(" "),v("p",[t._v("按照一定方式对"),v("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("数据分组")]),t._v("，每一组就是一个桶。比如按照部门对员工数据分组，可以得到：hr 桶，rd 桶，fi 桶等等。")]),t._v(" "),v("p",[t._v("ElasticSearch 中划分桶的方式有很多：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("划分方式")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Terms Aggregation")]),t._v(" "),v("td",[t._v("根据词条内容分组，词条内容完全匹配的为一组")])]),t._v(" "),v("tr",[v("td",[t._v("Histogram Aggregation")]),t._v(" "),v("td",[t._v("根据数值阶梯分组，与日期类似")])]),t._v(" "),v("tr",[v("td",[t._v("Range Aggregation")]),t._v(" "),v("td",[t._v("数值和日期的范围分组，指定开始和结束，然后按段分组")])]),t._v(" "),v("tr",[v("td",[t._v("Date Histogram Aggregation")]),t._v(" "),v("td",[t._v("根据日期阶梯分组，例如给定阶梯为周，会自动每周分为一组")])])])]),t._v(" "),v("h2",{attrs:{id:"_3、度量-metrics"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3、度量-metrics"}},[t._v("#")]),t._v(" 3、度量（metrics）")]),t._v(" "),v("p",[t._v("bucket aggregations 只负责对数据进行分组，并不进行计算。因此往往 bucket 中往往会嵌套另一种聚合：metrics aggregations 即度量。")]),t._v(" "),v("p",[t._v("分组完成以后，我们一般会对每个组中的数据进行"),v("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("聚合运算")]),t._v("，例如求平均值、最大、最小、求和等。这些运算在 ElasticSearch 中称为度量。")]),t._v(" "),v("p",[t._v("常用的度量聚合方式有：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("度量方式")]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("Avg Aggregation")]),t._v(" "),v("td",[t._v("求平均值")])]),t._v(" "),v("tr",[v("td",[t._v("Max Aggregation")]),t._v(" "),v("td",[t._v("求最大值")])]),t._v(" "),v("tr",[v("td",[t._v("Min Aggregation")]),t._v(" "),v("td",[t._v("求最小值")])]),t._v(" "),v("tr",[v("td",[t._v("Percentiles Aggregation")]),t._v(" "),v("td",[t._v("求百分比")])]),t._v(" "),v("tr",[v("td",[t._v("Stats Aggregation")]),t._v(" "),v("td",[t._v("同时返回avg、max、min、sum、count等")])]),t._v(" "),v("tr",[v("td",[t._v("Sum Aggregation")]),t._v(" "),v("td",[t._v("求和")])]),t._v(" "),v("tr",[v("td",[t._v("Top hits Aggregation")]),t._v(" "),v("td",[t._v("求前几")])]),t._v(" "),v("tr",[v("td",[t._v("Value Count Aggregation")]),t._v(" "),v("td",[t._v("求总数")])])])]),t._v(" "),v("p",[v("RouterLink",{attrs:{to:"/pro012-ElasticSearch/lecture/chapter04/verse06.html"}},[t._v("回目录")]),t._v(" "),v("RouterLink",{attrs:{to:"/pro012-ElasticSearch/lecture/chapter04/point02.html"}},[t._v("下一点")])],1)])}),[],!1,null,null,null);_.default=e.exports}}]);