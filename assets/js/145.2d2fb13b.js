(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{1893:function(t,s,a){t.exports=a.p+"assets/img/img024.559f7fd2.png"},1894:function(t,s){t.exports="data:image/png;base64,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"},1895:function(t,s,a){t.exports=a.p+"assets/img/img026.ca087681.png"},1896:function(t,s,a){t.exports=a.p+"assets/img/img027.f009df81.png"},2492:function(t,s,a){"use strict";a.r(s);var n=a(54),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#_1、理解"}},[t._v("1、理解")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1目的"}},[t._v("①目的")])]),n("li",[n("a",{attrs:{href:"#_2原理"}},[t._v("②原理")])])])]),n("li",[n("a",{attrs:{href:"#_2、操作"}},[t._v("2、操作")]),n("ul",[n("li",[n("a",{attrs:{href:"#_1配置-schema-xml"}},[t._v("①配置 schema.xml")])]),n("li",[n("a",{attrs:{href:"#_2配置-rule-xml"}},[t._v("②配置 rule.xml")])])])]),n("li",[n("a",{attrs:{href:"#_3、测试"}},[t._v("3、测试")])])])]),n("p"),t._v(" "),n("h1",{attrs:{id:"一致性-hash-分片"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一致性-hash-分片"}},[t._v("#")]),t._v(" 一致性 hash 分片")]),t._v(" "),n("h2",{attrs:{id:"_1、理解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、理解"}},[t._v("#")]),t._v(" 1、理解")]),t._v(" "),n("h3",{attrs:{id:"_1目的"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1目的"}},[t._v("#")]),t._v(" ①目的")]),t._v(" "),n("p",[t._v("最大限度的让数据均匀分布")]),t._v(" "),n("h3",{attrs:{id:"_2原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2原理"}},[t._v("#")]),t._v(" ②原理")]),t._v(" "),n("p",[t._v("一致性 hash 算法引入了 hash 环的概念。环的大小是 0~2^32-1。首先通过 crc16 算法计算出数据节点在 hash 环中的位置。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1893),alt:"images"}})]),t._v(" "),n("p",[t._v("当存储数据时，也会采用同样的算法，计算出数据key的hash值，映射到hash环上。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1894),alt:"images"}})]),t._v(" "),n("p",[t._v("然后从数据映射的位置开始，以顺时针的方式找出距离最近的数据节点，接着将数据存入到该节点中。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1895),alt:"images"}})]),t._v(" "),n("p",[t._v("此时可以发现，数据并没有达到预期的数据均匀，可以发现如果两个数据节点在环上的距离，决定有大量数据存入了dataNode2，而仅有少量数据存入dataNode1。")]),t._v(" "),n("p",[t._v("为了解决数据不均匀的问题，在mycat中可以设置"),n("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v("虚拟数据映射节点")]),t._v("。同时这些虚拟节点会映射到实际数据节点。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1896),alt:"images"}})]),t._v(" "),n("p",[t._v("数据仍然以顺时针方式寻找数据节点，当找到最近的数据节点无论是实际还是虚拟，都会进行存储，如果是虚拟数据节点的话，最终会将数据保存到实际数据节点中。 从而尽量的使数据均匀分布。")]),t._v(" "),n("h2",{attrs:{id:"_2、操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、操作"}},[t._v("#")]),t._v(" 2、操作")]),t._v(" "),n("h3",{attrs:{id:"_1配置-schema-xml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1配置-schema-xml"}},[t._v("#")]),t._v(" ①配置 schema.xml")]),t._v(" "),n("p",[t._v("指定拆分规则：sharding-by-murmur")]),t._v(" "),n("h3",{attrs:{id:"_2配置-rule-xml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2配置-rule-xml"}},[t._v("#")]),t._v(" ②配置 rule.xml")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("tableRule")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sharding-by-murmur"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("rule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("columns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("emp_id"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("columns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("algorithm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("murmur"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("algorithm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("rule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("tableRule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("murmur"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("io.mycat.route.function.PartitionByMurmurHash"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 默认是0即可 --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("seed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 要分片的数据库节点数量，必须指定，否则没法分片 --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 一个实际的数据库节点被映射为这么多虚拟节点，默认是160倍，也就是虚拟节点数是物理节点数的160倍 --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("virtualBucketTimes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("160"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])]),n("h2",{attrs:{id:"_3、测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、测试"}},[t._v("#")]),t._v(" 3、测试")]),t._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USE")]),t._v(" virtual"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("db"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("hello"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" t_emp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("emp_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("emp_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("emp_gender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("111")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eeeeeeeeeee'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'male'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" t_emp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("emp_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("emp_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("emp_gender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("888")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ttttttttttt'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'male'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[n("RouterLink",{attrs:{to:"/pro018-MySQL-high/lecture/chapter11/sharding-algorithm/detail08.html"}},[t._v("上一点")]),t._v(" "),n("RouterLink",{attrs:{to:"/pro018-MySQL-high/lecture/chapter11/verse03.html"}},[t._v("回目录")])],1)])}),[],!1,null,null,null);s.default=e.exports}}]);