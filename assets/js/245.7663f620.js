(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{1839:function(s,t){s.exports="data:image/png;base64,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"},1840:function(s,t,a){s.exports=a.p+"assets/img/img029.49828a20.png"},2476:function(s,t,a){"use strict";a.r(t);var r=a(54),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#_1、需求"}},[s._v("1、需求")])]),r("li",[r("a",{attrs:{href:"#_2、慢查询日志介绍"}},[s._v("2、慢查询日志介绍")])]),r("li",[r("a",{attrs:{href:"#_3、查看及开启"}},[s._v("3、查看及开启")])]),r("li",[r("a",{attrs:{href:"#_4、查看捕获到的记录"}},[s._v("4、查看捕获到的记录")]),r("ul",[r("li",[r("a",{attrs:{href:"#_1执行一条慢-sql"}},[s._v("①执行一条慢 SQL")])]),r("li",[r("a",{attrs:{href:"#_2查询当前系统中有多少条慢查询记录"}},[s._v("②查询当前系统中有多少条慢查询记录")])]),r("li",[r("a",{attrs:{href:"#_3查看日志信息内容"}},[s._v("③查看日志信息内容")])]),r("li",[r("a",{attrs:{href:"#_4使用mysqldumpslow命令导出"}},[s._v("④使用mysqldumpslow命令导出")])])])])])]),r("p"),s._v(" "),r("h1",{attrs:{id:"第八章-慢查询日志"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第八章-慢查询日志"}},[s._v("#")]),s._v(" 第八章 慢查询日志")]),s._v(" "),r("h2",{attrs:{id:"_1、需求"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1、需求"}},[s._v("#")]),s._v(" 1、需求")]),s._v(" "),r("p",[s._v("在实际开发和项目运行的过程中，需要尽量准确的把查询时间消耗较大的 SQL 语句给找出来。然后有针对性的建立索引，再使用 explain 技术进行分析，找到性能瓶颈，最后调整 SQL 语句。")]),s._v(" "),r("h2",{attrs:{id:"_2、慢查询日志介绍"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2、慢查询日志介绍"}},[s._v("#")]),s._v(" 2、慢查询日志介绍")]),s._v(" "),r("p",[s._v("由 MySQL 负责以日志的形式记录那些执行时间超过阈值的 SQL 语句。当然，如果不是调优需要的话，一般不建议启动该参数，因为开启慢查询日志会或多或少带来一定的性能影响。慢查询日志支持将日志记录写入文件。")]),s._v(" "),r("h2",{attrs:{id:"_3、查看及开启"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3、查看及开启"}},[s._v("#")]),s._v(" 3、查看及开启")]),s._v(" "),r("p",[s._v("慢查询日志记录功能默认关闭。")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认情况下slow_query_log的值为OFF")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" VARIABLES "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%slow_query_log%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("命令行开启：")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("global")]),s._v(" slow_query_log"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("慢查询日志记录long_query_time时间")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" VARIABLES "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%long_query_time%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GLOBAL")]),s._v(" VARIABLES "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'long_query_time'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GLOBAL")]),s._v(" long_query_time"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("p",[r("strong",[s._v("注意: 运行时间正好等于long_query_time的情况，并不会被记录下来。")])]),s._v(" "),r("p",[s._v("永久生效")]),s._v(" "),r("div",{staticClass:"language-properties line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-properties"}},[r("code",[r("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("修改my.cnf文件，[mysqld]下增加或修改参数slow_query_log")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("和slow_query_log_file后，然后重启MySQL服务器。也即将如下四行配置进my.cnf文件 ")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("slow_query_log")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("1")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("slow_query_log_file")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/var/lib/mysql/atguigu-slow.log ")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("long_query_time")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("3")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("log_output")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("FILE")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("h2",{attrs:{id:"_4、查看捕获到的记录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4、查看捕获到的记录"}},[s._v("#")]),s._v(" 4、查看捕获到的记录")]),s._v(" "),r("h3",{attrs:{id:"_1执行一条慢-sql"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1执行一条慢-sql"}},[s._v("#")]),s._v(" ①执行一条慢 SQL")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" emp "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" emp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" emp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"_2查询当前系统中有多少条慢查询记录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2查询当前系统中有多少条慢查询记录"}},[s._v("#")]),s._v(" ②查询当前系统中有多少条慢查询记录")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GLOBAL")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STATUS")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%Slow_queries%'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("显示结果是：")]),s._v(" "),r("p",[r("img",{attrs:{src:a(1839),alt:"images"}})]),s._v(" "),r("h3",{attrs:{id:"_3查看日志信息内容"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3查看日志信息内容"}},[s._v("#")]),s._v(" ③查看日志信息内容")]),s._v(" "),r("p",[r("img",{attrs:{src:a(1840),alt:"images"}})]),s._v(" "),r("h3",{attrs:{id:"_4使用mysqldumpslow命令导出"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4使用mysqldumpslow命令导出"}},[s._v("#")]),s._v(" ④使用mysqldumpslow命令导出")]),s._v(" "),r("p",[s._v("在生产环境中，如果要手工分析日志，查找、分析SQL，显然是个体力活，MySQL提供了日志分析工具mysqldumpslow。")]),s._v(" "),r("p",[s._v("-a: 不将数字抽象成N，字符串抽象成S")]),s._v(" "),r("p",[s._v("-s: 是表示按照何种方式排序；")]),s._v(" "),r("p",[s._v("c: 访问次数")]),s._v(" "),r("p",[s._v("l: 锁定时间")]),s._v(" "),r("p",[s._v("r: 返回记录")]),s._v(" "),r("p",[s._v("t: 查询时间")]),s._v(" "),r("p",[s._v("al:平均锁定时间")]),s._v(" "),r("p",[s._v("ar:平均返回记录数")]),s._v(" "),r("p",[s._v("at:平均查询时间")]),s._v(" "),r("p",[s._v("-t: 即为返回前面多少条的数据；")]),s._v(" "),r("p",[s._v("-g: 后边搭配一个正则匹配模式，大小写不敏感的；")]),s._v(" "),r("div",{staticClass:"language-sql line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-sql"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#得到返回记录集最多的10个SQL")]),s._v("\nmysqldumpslow "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s r "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("atguigu"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slow"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#得到访问次数最多的10个SQL")]),s._v("\nmysqldumpslow "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s c "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("atguigu"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slow"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#得到按照时间排序的前10条里面含有左连接的查询语句")]),s._v("\nmysqldumpslow "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s t "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"left join"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("atguigu"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slow"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#另外建议在使用这些命令时结合 | 和more 使用 ，否则有可能出现爆屏情况")]),s._v("\nmysqldumpslow "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s r "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("atguigu"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("slow"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" more\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br")])]),r("p",[r("RouterLink",{attrs:{to:"/pro018-MySQL-high/lecture/chapter07/index.html"}},[s._v("上一章")]),s._v(" "),r("RouterLink",{attrs:{to:"/pro018-MySQL-high/lecture/index.html"}},[s._v("回目录")]),s._v(" "),r("RouterLink",{attrs:{to:"/pro018-MySQL-high/lecture/chapter09/index.html"}},[s._v("下一章")])],1)])}),[],!1,null,null,null);t.default=e.exports}}]);